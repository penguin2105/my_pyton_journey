1. –ò–º–ø–æ—Ä—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫
python
from telegram import Update, ReplyKeyboardMarkup, KeyboardButton, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import Updater, CommandHandler, MessageHandler, Filters, CallbackContext, CallbackQueryHandler
import random
telegram - –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram API

telegram.ext - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–∞

random - –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω—ã—Ö —á–∏—Å–µ–ª (–≤ –∏–≥—Ä–µ "–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ")



2. –¢–æ–∫–µ–Ω –±–æ—Ç–∞
python
TOKEN = "7814951497:AAHM4Gg_PwhCjZQJ3aNltWjniCWfmCOJRPY"
–£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤–∞—à–µ–≥–æ –±–æ—Ç–∞, –≤—ã–¥–∞–Ω–Ω—ã–π BotFather.


3. –§—É–Ω–∫—Ü–∏—è start()
python
def start(update: Update, context: CallbackContext) -> None:
    user = update.effective_user
    update.message.reply_text(
        f"–ü—Ä–∏–≤–µ—Ç, {user.first_name}! –Ø –ö–æ—Å—Ç—è —Ä–≤–∞–Ω–Ω—ã–µ –∫–æ–ª–≥–æ—Ç–∫–∏ —Å –∫–Ω–æ–ø–∫–∞–º–∏.\n"
        "–ò—Å–ø–æ–ª—å–∑—É–π /help —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã."
    )
    show_main_keyboard("help_text")
–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–æ–º–∞–Ω–¥–µ /start

–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –∏–º–µ–Ω–∏

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—É—é –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É    



4. –§—É–Ω–∫—Ü–∏—è help_command()
python
def help_command(update: Update, context: CallbackContext) -> None:
    help_text = """
    –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
    /start - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –ö–æ—Å—Ç–µ–π
    /help - –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–º–æ—â—å
    /menu - –ü–æ–∫–∞–∑–∞—Ç—å –º–µ–Ω—é
    /info - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
    /game - –ò–≥—Ä–∞—Ç—å –≤ '–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ' (1-100)
    /stop - –°–¥–∞—Ç—å—Å—è –∏ –∑–∞–∫–æ–Ω—á–∏—Ç—å –∏–≥—Ä—É
    
    –¢–∞–∫–∂–µ –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫–∏ –Ω–∏–∂–µ!
    """
    update.message.reply_text(help_text)
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥

–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ /help


5. –§—É–Ω–∫—Ü–∏—è info()
python
def info(update: Update, context: CallbackContext) -> None:
    update.message.reply_text("–Ø –∫.—é —Ä–≤–∞–ª —Ç–≤–æ—é –∂–æ–ø—É –¥–∞–≤–∞–π –≤—ã–±–µ—Ä–∏ –ø—É–Ω–∫—Ç—ã.\n–ù–µ—Å—Ç–µ—Å–Ω—è–π—Å—è —è –Ω–µ—Ñ–æ—Ä.")
–ü—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ /info



6. –ò–≥—Ä–∞ "–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ"
start_game()
python
def start_game(update: Update, context: CallbackContext) -> None:
    secret_number = random.randint(1, 100)
    context.user_data['game_active'] = True
    context.user_data['secret_number'] = secret_number
    context.user_data['attempts'] = 0
    update.message.reply_text(
        "üéÆ –ò–≥—Ä–∞ '–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ'!\n"
        "–ï–±–∞—à —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 100. –ü–æ–ø—Ä–æ–±—É–π —É–≥–∞–¥–∞—Ç—å!\n"
        "–ß—Ç–æ–±—ã —Å–¥–∞—Ç—å—Å—è, –Ω–∞–ø–∏—à–∏ /stop."
    )
–ù–∞—á–∏–Ω–∞–µ—Ç –Ω–æ–≤—É—é –∏–≥—Ä—É

–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ª—É—á–∞–π–Ω–æ–µ —á–∏—Å–ª–æ

–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–≥—Ä—ã –≤ context.user_data

guess_number()
python
def guess_number(update: Update, context: CallbackContext) -> None:
    if context.user_data.get('game_active'):
        try:
            user_guess = int(update.message.text)
            secret_number = context.user_data['secret_number']
            context.user_data['attempts'] += 1

            if user_guess < 1 or user_guess > 200:
                update.message.reply_text("üö´ –ü—Ä–æ–≤–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç 1 –¥–æ 200–º–º!")
            elif user_guess < secret_number:
                update.message.reply_text("‚¨ÜÔ∏è –ù–∏—Ö—É—è –Ω–µ –æ—Ç–≥–∞–¥–∞–ª –°–µ—Ä–µ–∂–∞ –±—É–¥–µ—Ç –Ω–µ–¥–æ–≤–æ–ª–µ–Ω!")
            elif user_guess > secret_number:
                update.message.reply_text("‚¨áÔ∏è –ù–∞—Ö—É–π —Å—Ç–æ–ª—å–∫–æ –º–∞–ª–æ!")
            else:
                attempts = context.user_data['attempts']
                update.message.reply_text(f"üéâ –ï–±–∞—Ç—å —Ç—ã –º–æ–ª–æ–¥–µ—Ü! –£–≥–∞–¥–∞–ª –∑–∞ {attempts} –ø–æ–ø—ã—Ç–æ–∫!")
                context.user_data.clear()
        except ValueError:
            update.message.reply_text("üî¢ –ï–±–∞—à —Ç–æ –º—ã —Å —Å–µ—Ä–µ–∂–æ–π –æ–±–∏–¥–µ–º—Å—è –æ—Ç 1 –¥–æ 200!")
    else:
        button_click(update, context)
–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ–ø—ã—Ç–∫–∏ —É–≥–∞–¥–∞—Ç—å —á–∏—Å–ª–æ

–î–∞–µ—Ç –ø–æ–¥—Å–∫–∞–∑–∫–∏ (–±–æ–ª—å—à–µ/–º–µ–Ω—å—à–µ)

–°—á–∏—Ç–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫

stop_game()
python
def stop_game(update: Update, context: CallbackContext) -> None:
    if 'secret_number' in context.user_data:
        secret_number = context.user_data['secret_number']
        update.message.reply_text(
            f"üò• –ù–∏—Ö—É—è —Ç—ã —Ç–∏–ø–æ {secret_number}.\n"
            "–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –º–µ–Ω—è –∑–∞–µ–±–∞—Ç—å –µ–±–∞—à /game."
        )
        context.user_data.clear()
–ó–∞–≤–µ—Ä—à–∞–µ—Ç –∏–≥—Ä—É –¥–æ—Å—Ä–æ—á–Ω–æ

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∑–∞–≥–∞–¥–∞–Ω–Ω–æ–µ —á–∏—Å–ª–æ


7. –†–∞–±–æ—Ç–∞ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞–º–∏
show_main_keyboard()
python
def show_main_keyboard(update: Update, context: CallbackContext) -> None:
    keyboard = [
        [KeyboardButton("–ö–æ–º–Ω–∞—Ç–∞  1"), KeyboardButton("–ö–æ–º–Ω–∞—Ç–∞ 2")],
        [KeyboardButton("–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏"), KeyboardButton("–ü–æ–º–æ—â—å")],
    ]
    reply_markup = ReplyKeyboardMarkup(keyboard, resize_keyboard=True)
    update.message.reply_text("–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:", reply_markup=reply_markup)
–°–æ–∑–¥–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—É—é –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–∞–º–∏

–ö–Ω–æ–ø–∫–∏ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã –≤ –¥–≤–∞ —Ä—è–¥–∞

button_click()
python
def button_click(update: Update, context: CallbackContext) -> None:
    text = update.message.text
    if text == "–ö–Ω–æ–ø–∫–∞ 1":
        update.message.reply_text("–õ–µ—à–∞ —Ç—ã –ø—Ä–∏–Ω—è–ª –≠–ª–µ–∫—Ç—Ä–æ —Å–ø–±!")
    elif text == "–ö–Ω–æ–ø–∫–∞ 2":
        update.message.reply_text("–õ–µ—à–∞ –≥–¥–µ –ø—Ä–æ–≤–æ–¥–∞!")
    elif text == "–ò–Ω–ª–∞–π–Ω –∫–Ω–æ–ø–∫–∏":
        show_inline_keyboard(update, context)
    elif text == "–ü–æ–º–æ—â—å":
        help_command(update, context)
–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞–∂–∞—Ç–∏—è –æ–±—ã—á–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫

–î–ª—è –∫–∞–∂–¥–æ–π –∫–Ω–æ–ø–∫–∏ - —Å–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ

8. –ò–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–∫–∏
show_inline_keyboard()
python
def show_inline_keyboard(update: Update, context: CallbackContext) -> None:
    keyboard = [
        [InlineKeyboardButton("–û–ø—Ü–∏—è 1", callback_data='option1')],
        [InlineKeyboardButton("–û–ø—Ü–∏—è 2", callback_data='option2')],
        [InlineKeyboardButton("–ó–∞–∫—Ä—ã—Ç—å", callback_data='close')],
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)
    update.message.reply_text("–í—ã–±–µ—Ä–∏—Ç–µ –æ–ø—Ü–∏—é:", reply_markup=reply_markup)
–°–æ–∑–¥–∞–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∏–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–∫–∞–º–∏

–ö–∞–∂–¥–∞—è –∫–Ω–æ–ø–∫–∞ –∏–º–µ–µ—Ç —Å–≤–æ–π callback_data

inline_button()
python
def inline_button(update: Update, context: CallbackContext) -> None:
    query = update.callback_query
    query.answer()
    
    if query.data == 'option1':
        query.edit_message_text(text="–ì–¥–µ –ø—Ä–æ–≤–æ–¥–∞")
    elif query.data == 'option2':
        query.edit_message_text(text="–Ø –Ω–∞ –º–æ—Ä–µ –∂–æ–ø—É –∑–∞–≥–æ—Ä–∞—é –¥–ª—è –í–∞–Ω–∏")
    elif query.data == 'close':
        query.edit_message_text(text="–ü–æ—à–ª–∏ –æ—Ç—Å—é–¥–∞")
–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞–∂–∞—Ç–∏—è –∏–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–æ–∫

–ú–µ–Ω—è–µ—Ç —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∫–Ω–æ–ø–∫–∞–º–∏

9. –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è main()
python
def main() -> None:
    updater = Updater("7814951497:AAHM4Gg_PwhCjZQJ3aNltWjniCWfmCOJRPY")
    dispatcher = updater.dispatcher

    dispatcher.add_handler(CommandHandler("start", start))
    dispatcher.add_handler(CommandHandler("help", help_command))
    dispatcher.add_handler(CommandHandler("info", info))
    dispatcher.add_handler(CommandHandler("menu", show_main_keyboard))
    dispatcher.add_handler(CommandHandler("game", start_game))
    dispatcher.add_handler(CommandHandler("stop", stop_game))

    dispatcher.add_handler(MessageHandler(Filters.text & ~Filters.command, guess_number))
    dispatcher.add_handler(CallbackQueryHandler(inline_button))

    updater.start_polling()
    updater.idle()
–°–æ–∑–¥–∞–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä –±–æ—Ç–∞

–†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –≤—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ –∏ —Å–æ–æ–±—â–µ–Ω–∏–π

–ó–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–∞ –≤ —Ä–µ–∂–∏–º–µ polling

10. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
python
if __name__ == '__main__':
    main()
–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞

–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞:
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–≤–∞ —Ç–∏–ø–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä:

–û–±—ã—á–Ω–∞—è ReplyKeyboardMarkup

–ò–Ω–ª–∞–π–Ω InlineKeyboardMarkup

–ò–≥—Ä–∞ "–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ" —Å:

–•—Ä–∞–Ω–µ–Ω–∏–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ context.user_data

–ü–æ–¥—Å—á–µ—Ç–æ–º –ø–æ–ø—ã—Ç–æ–∫

–ü–æ–¥—Å–∫–∞–∑–∫–∞–º–∏

–ù–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–ª–µ–Ω–≥–∞)

–í–∞–∂–Ω–æ: –≤ –∫–æ–¥–µ –µ—Å—Ç—å –æ—à–∏–±–∫–∞ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ start() - show_main_keyboard("help_text") –ø–µ—Ä–µ–¥–∞–µ—Ç —Å—Ç—Ä–æ–∫—É –≤–º–µ—Å—Ç–æ update –∏ context. –ù—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–∞:

python
show_main_keyboard(update, context)
